# 复习结构

## 第一章

### 批处理系统、分时系统 时间片、实时系统、多道程序。

#### 多道程序通过组织作业，使CPU总有一个作业可执行，从而提高了CPU作用率

#### 分时系统是多道程序设计的延伸，CPU在作业之间切换，切换频率很高

#### 批处理是指用户将一批作业提交给操作系统后就不再干预，由操作系统控制它们自动运行。这种采用批量处理作业技术的操作系统称为批处理操作系统。

#### 实时系统（Real-time system,RTS）的正确性不仅依赖系统计算的逻辑结果，还依赖于产生这个结果的时间。实时系统能够在指定或者确定的时间内完成系统功能和外部或内部、同步或异步时间做出响应的系统。

### 系统层次、操作系统概念

#### 操作系统（Operating System，简称OS）是管理和控制计算机硬件与软件资源的计算机程序

### 双重模式 特权指令

#### 

### 存储

### 定时器的作用

#### 确保操作系统能维持对CPU的控制，也防止用户程序陷入死循环或不调用系统服务，并且不将控制权返回到操作系统

## 第二章

### 系统调用

#### 进程控制

#### 文件管理

#### 设备管理

#### 信息维护

#### 通信

##### xiao’xi’chu’a

###### 数据量少合适

##### 共享内存

###### 速度快，但是保护和同步方面存在问题

## 第三章 进程

### 进程五状态图 状态之间的转换

#### 新的

#### 运行

#### 等待

#### 就绪

#### 终止

### 进程创建

### PCB

#### 一个特定进程相关信息

##### 进程状态

##### 程序计数器

##### CPU寄存器

##### CPU调度信息

## 线程

### 任务和线程的区别？？ 。

#### 线程是CPU使用的基本单元

#### 指由软件完成的一个活动。一个任务既可以是一个进程,也可以是一个线程。

### 线程的动机 进程和线程的创建

#### 

### 线程模型

#### 一对一

##### 

#### 多对多

##### 

## 调度

### CPU 区间 I/O区间

### 抢占式 非抢占式

### 短期 中期 长期 程序分派？？

#### 短期：从就绪队列中选择一个进程执行

### 调度准则 吞吐量 CPU使用率 周转时间 平均等待时间 计算

### 调度算法 。。。甘特图 多级反馈 例子 优点

## 进程同步

### 互斥

### 临界区概念

#### 互斥

#### 前进

#### 有限等待

### 信号量 例子 信号量的意义

### 生产者消费者 读者写者 有限缓冲 哲学家 过桥问题

### 伪代码编写 初始化信号量

## 死锁

### 四个必要条件

#### 互斥

#### 非抢占

#### 占有并等待

#### 循环等待

### 死锁预防 几种方法 死锁避免

### 银行家算法 安全、安全序列的概念 缺点：要知道总的资源需求

### 资源分配图

### 死锁预防

#### 

### 死锁避免

### 死锁检测算法

### 死锁恢复

#### 进程终止

##### 终止所有进程

##### 一次只终止一个进程知道取消死锁循环为止

#### 资源抢占

##### 选择一个牺牲品

##### 回滚

##### 饥饿

### 死锁解除 原则？

## 第八章内存管理

### 编译链接 地址映射 链接的概念

#### 静态链接 动态链接 动态加载

##### 把用户源程序编译后链接到一个以0地址为始地址的线性或多维逻辑地址空间

##### 静态链接是在生成可执行文件时进行的。

##### 动态链接 在装入或运行时进行链接。

#### 静态重定位 动态重定位

##### 地址重定位就是操作系统将逻辑地址转变为物理地址的过程

##### 静态重定位是在程序执行之前进行重定位，它根据装配模块将要装入的内存起始位置，直接修改装配模块中的有关使用地址的指令

##### 动态重定位是指，不是在程序执行之前而是在程序执行过程中进行地址重定位。更确切地说，是在CPU每次访问内存单元前才进行地址变换

### 连续内存分配

#### 分配算法 首次 最差 最坏 优缺点

#### 静态分区 动态分区 内外碎片

#### 分页 页表 TLB 分页的地址映射 为什么 缺点：代码共享问题

##### 用户视角内存和实际视角内存分离

#### 分段 地址映射 段表

##### 缺点：外碎片 分段也可以用来作为虚拟内存技术

##### 优点：

###### 共享代码

###### 容易在段间留下许多碎片，造成存储空间利用率降低。

###### 分页对程序员而言是不可见的，而分段通常对程序员而言是可见的

#### 段页式

##### 原理

###### 用分段方法来分配和管理虚拟存储器。程序的地址空间按逻辑单位分成基本独立的段，而每一段有自己的段名，再把每段分成固定大小的若干页。

###### 用分页方法来分配和管理实存。即把整个主存分成与上述页大小相等的存储块，可装入作业的任何一页。程序对内存的调入或调出是按页进行的。但它又可按段实现共享和保护。

##### 优缺点

###### 它提供了大量的虚拟存储空间

###### 能有效地利用主存，为组织多道程序运行提供了方便。

###### 内碎片

## 第九章 虚拟内存

### 虚拟内存

#### 将内存抽象抽象成一个巨大的，统一的存储数组，进而将用户看到的逻辑内存和物理内存分隔开。允许程序员不受内存限制。

### 请求调页

### 缺页中断 特点：指令会重新执行一次

### 页置换

#### FIFO

#### 最优置换 OPT

##### 置换最长时间不会使用的页

#### LRU 置换 最近最少使用

### 帧分配

#### 全局分配和局部分配

### belady 异常

### 抖动

#### 频繁的页调度，一个进程在换页上用的时间多于进程实际运行的时间

#### 原因：

##### CPU使用率达到最大值，多道程序的程度增加

## 第十章 逻辑文件系统

### 按名存储优点？？共享 分组

### 目录 单层 双层 树 图 图的问题

## 十一章 文件系统实现

### 文件系统分层

### 打开文件

### FCB

#### 拥有者、权限、文件内容

### 文件目录 文件信息表 FCB 表

### 分配方法 每种优缺点

#### 链接分配 FAT 优点 直接访问

#### 索引分配 inode 计算

#### 连续分配

### 空闲空间管理 优缺点

#### 位图

#### 空闲链 缺点 每次分配和回收都要访问内存

#### 存储链法？？ 计算

### 分区 逻辑格式 FAT空间空间管理 超级块

### 虚拟文件系统 动机

## 十二章 大容量存储器的结构

### 磁道和柱面 半径相同的磁道组成柱面

### 传输速率

#### 寻道时间 旋转延迟时间

### 磁盘调度 寻道之间

#### 除了FCFS其他都会引起饥饿 举例子

### 磁盘管理

#### 格式化 物理格式化

##### 低级格式化 分成扇区以便磁盘控制器能读和写

#### 坏块处理

### RAID 每一个清楚

#### RAID 4 和5 4：每个盘负载不一样 5：负载均匀

#### 条带 怎么存 RAID5

## 十三章 I/O

### port bus controller 概念

### I/O控制传输方式 四种 优缺点

#### 中断和异常的差别

#### 中断处理

### 同步异步 阻塞 非阻塞

### 缓冲 单缓冲 多缓冲 例子

### 设备驱动 设备控制器

# 内存管理

## 内存管理单元

### 从虚拟地址到物理地址的映射

## 逻辑地址

### CPU生成的地址

## 动态加载

# 虚拟内存

# 文件系统

## 打开文件

### 单个进程的表

### 整个系统的表

## 访问方法

### 顺序访问

### 直接访问

## 目录结构

### 单层目录

### 双层目录

### 。。

## 分配方法

### 连续分配

### 链接分配

#### FAT 文件分配表

##### 目录条目含有文件首块的块号码，根据块号码索引的FAT条目包含文件下一块的号码

#### 优缺点

##### 解决连续分配的问题

##### 顺序访问

##### 指针空间

##### 可靠性

### 索引分配

## 空闲空间管理

### 位向量

### 链表

### 组

# 大容量存储器的结构

## 随机访问时间=寻道时间+循环等待时间

## 磁盘调度

## RAID 磁盘冗余阵列技术 提高性能和可靠性

# I/O输入系统

## I/O硬件

### 总线

#### 一组线和一组严格定义的可以描述在线上传输信息的协议

### 控制器

#### 用于操作端口、总线、设备的一组电子器件

### 处理器想控制器发送命令完成I/O传输

#### 端口映射I/O

##### 使用特殊I/O指令来向制定的I/O端口地址传输一个字节或字

#### 内存映射I/O

##### 设备控制寄存器被映射到处理器的地址空间 标准数据传输指令

### I/O端口寄存器

#### 状态寄存器

#### 控制寄存器

#### 数据输入寄存器

#### 数据输出寄存器

### 设备和处理器通信

#### 轮询

##### 启动输入数据时，将状态寄存器置为1，然后不断检测该标志，直到标志寄存器变为0，证明输入数据结束。

#### 中断

##### 能使外设通知CPU的硬件机制

##### 当进程请求I/O时，立刻中断CPU，保存现场后，交给相应的中断处理程序。有I/O就中断。而在I/O时，CPU可以和I/O设备并行执行。

##### 设备控制器通过中断请求线发送信号而引起中断，CPU捕获中断并分发到中断处理程序

#### 直接内存访问

##### 指令寄存器、地址寄存器、数据寄存器和数据计数器。读磁盘时，命令送至指令寄存器，数据地址至地址寄存器，待读入的字节数存入数据计数器，磁盘的源地址也要送至DMA控制器的I/O逻辑上。然后启动DMA。

### I/O内核子系统

#### I/O调度

##### 设备状态表

#### 缓冲

##### 保存两个设备之间或在设备和应用程序之间所传输数据的内存区域

##### 处理 数据流的生产者和消费者之间的速度差异

##### 协调设备传输数据大小不一致的设备

##### 支持应用程序I/O的复制语义

##### 单缓冲 双缓冲 多缓冲 缓冲池

#### 高速缓存

##### 保留数据副本的高速存储器

##### 高速缓存和缓冲

###### 缓冲可能是数据项的唯一副本

#### 假脱机和设备预留

##### 保留设备输出的缓冲区

#### I/O保护

##### 特权指令
